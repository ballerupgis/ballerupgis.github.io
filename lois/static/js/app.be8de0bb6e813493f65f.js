webpackJsonp([1],{M93x:function(t,e,a){"use strict";function r(t){a("mWqT")}var s=a("xJD8"),n=a("PBYb"),i=a("VU/8"),o=r,l=i(s.a,n.a,!1,o,null,null);e.a=l.exports},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("7+uW"),s=a("M93x");r.a.config.productionTip=!1,new r.a({el:"#app",template:"<App/>",components:{App:s.a}})},PBYb:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t._m(0),t._v(" "),a("div",{staticClass:"container"},[a("div",{attrs:{id:"mapid"}}),t._v(" "),a("button",{staticClass:"btn btn-secondary btn-lg btn-block",attrs:{type:"button"},on:{click:function(e){t.createReport(t.geometry)}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[t._v("HENT RAPPORT")]),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"fa fa-refresh fa-spin",staticStyle:{"font-size":"24px"}})]),t._v(" "),a("div",{staticClass:"row"}),t._v(" "),a("div",{attrs:{id:"report"}},t._l(t.report,function(e){return a("div",{staticClass:"jumbotron",attrs:{id:e.SheetName}},[a("h1",[t._v(t._s(e.SheetName.split("_").join(" - ")))]),t._v(" "),a("table",{staticClass:"table table-striped table-sm"},[t._m(1,!0),t._v(" "),a("tbody",t._l(e.Table[0],function(e,r){return a("tr",["Pct"==r.split("_")[0]?a("td",[t._v(t._s(r.split("_").slice(1,r.split("_").length).join(" "))+" (%)")]):"Antal"==r.split("_")[0]?a("td",[t._v(t._s(r.split("_").slice(1,r.split("_").length).join(" "))+" (antal)")]):a("td",[t._v(t._s(r))]),t._v(" "),"Pct"==r.split("_")[0]?a("td",["Niveau"==r.split("_")[r.split("_").length-1]?a("div",{staticClass:"progress"},[a("div",{staticClass:"progress-bar bg-success",style:{width:e+"%"},attrs:{role:"progressbar","aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":"100"}},[t._v(t._s(e)+" %")])]):t._e(),t._v(" "),"Kom"==r.split("_")[r.split("_").length-1]?a("div",{staticClass:"progress"},[a("div",{staticClass:"progress-bar bg-warning",style:{width:e+"%"},attrs:{role:"progressbar","aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":"100"}},[t._v(t._s(e)+" %")])]):t._e()]):a("td",[t._v(t._s(e))])])}))])])}))])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-light bg-faded"},[a("h1",{staticClass:"navbar-brand mb-0"},[t._v("LOIS STAT API")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",[a("strong",[t._v("VARIABEL")])]),t._v(" "),a("td",[a("strong",[t._v("VÆRDI")])])])])}],n={render:r,staticRenderFns:s};e.a=n},mWqT:function(t,e){},xJD8:function(t,e,a){"use strict";var r=a("fZjL"),s=a.n(r),n=a("mtWM"),i=a.n(n),o=a("nrd6"),l=a.n(o),c=a("GMVP");a.n(c);e.a={name:"app",data:function(){return{report:{},data:{},geometry:{},map:{},loading:!1}},methods:{getData:function(t){this.loading=!0;var e=this;i.a.post("http://bal0-lois:8080/api/datapakkeresultat?procedureID=3&procedureParametre=%7B%22UdStraekID%22%3A%221%22%2C%22LS2RapportID%22%3A%223%22%7D",t).then(function(t){e.loading=!1,e.report=t.data.Result,console.log(e.report),e.data=e.beutifyResponse(e.report)}).catch(function(t){e.loading=!1,alert("Kunne ikke få fat i data"),console.info(t)})},beutifyResponse:function(t){var e=[];return t.forEach(function(t){var a={sheetname:"",variables:[]};a.sheetname=t.SheetName;var r=t.Table[0];for(var s in r){var n={title:"",values:{}},i=s.split("_");n.title in a.variables&&console.log("findes"),n.title=i.slice(1,i.length-1).join(" ");switch(i[0]+i[i.length-1]){case"AntalNiveau":n.values.AntalNiveau=r[s];break;case"PctNiveau":n.values.PctNiveau=r[s];break;case"AntalKom":n.values.AntalKom=r[s];break;case"PctKom":n.values.PctKom=r[s]}a.variables.push(n)}e.push(a)}),e},createReport:function(t){0===s()(this.geometry).length&&this.geometry.constructor===Object?alert("Du mangler at tegne et område på kortet"):this.getData(t)}},mounted:function(){this.$nextTick(function(){var t=l.a.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri"}),e=l.a.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"});this.map=l.a.map("mapid",{center:[55.731267,12.363396],zoom:13,layers:[e]});var a={"Gråskala":e,Luftfoto:t};l.a.control.layers(a).addTo(this.map);var r=new l.a.FeatureGroup;this.map.addLayer(r);var s=new l.a.Control.Draw({draw:{polygon:!0,marker:!1,polyline:!1,rectangle:!1,circle:!1,circlemarker:!1},edit:{featureGroup:r}});this.map.addControl(s);var n=this;this.map.on("draw:created",function(t){var e=(t.layerType,t.layer),a={type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},s=e.toGeoJSON();n.geometry=s,n.geometry.crs=a,r.addLayer(e)}),this.map.on("draw:edited",function(){}),this.map.on("draw:deleted",function(){n.geometry={}})})}}}},["NHnr"]);
//# sourceMappingURL=app.be8de0bb6e813493f65f.js.map