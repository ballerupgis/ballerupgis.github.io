webpackJsonp([1],{AD0a:function(a,t){},Drc2:function(a,t,e){"use strict";t.a={props:["data","showToc"],name:"navbar"}},M93x:function(a,t,e){"use strict";function r(a){e("AD0a")}var s=e("xJD8"),n=e("hdlC"),o=e("VU/8"),i=r,l=o(s.a,n.a,!1,i,null,null);t.a=l.exports},NHnr:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("7+uW"),s=e("M93x"),n=e("bm7V"),o=e.n(n);r.a.use(o.a),r.a.config.productionTip=!1,new r.a({el:"#app",template:"<App/>",components:{App:s.a}})},NSCa:function(a,t){},hdlC:function(a,t,e){"use strict";var r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{attrs:{id:"app"}},[e("navbar",{attrs:{data:a.data,showToc:a.showToc}}),a._v(" "),e("div",{staticClass:"container"},[e("div",{attrs:{id:"mapid"}}),a._v(" "),e("button",{staticClass:"btn btn-secondary btn-lg btn-block",attrs:{type:"button"},on:{click:function(t){a.createReport(a.geometry)}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:!a.loading,expression:"!loading"}]},[a._v("HENT RAPPORT")]),a._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:a.loading,expression:"loading"}],staticClass:"fa fa-refresh fa-spin",staticStyle:{"font-size":"24px"}})]),a._v(" "),e("a",{directives:[{name:"show",rawName:"v-show",value:a.showToc,expression:"showToc"}],attrs:{href:"#",id:"pdf"},on:{click:a.pdf}},[e("i",{staticClass:"fa fa-file-pdf-o fa-2x bottom-right"})]),a._v(" "),e("div",{attrs:{id:"report"}},a._l(a.data,function(t){return e("div",{directives:[{name:"show",rawName:"v-show",value:"TotalKom"!==t.tablename&&"TotalNiveau"!==t.tablename,expression:"item.tablename !== 'TotalKom' && item.tablename !== 'TotalNiveau'"}],staticClass:"jumbotron",attrs:{id:t.tablename}},[e("h1",[a._v(a._s(t.title))]),a._v(" "),e("h5",[a._v(a._s(t.desciption))]),a._v(" "),e("p",{attrs:{id:"date"}},[a._v(a._s(new Date(t.data[0].values.BeregnDatoKom).getDate()+"/"+(Number(new Date(t.data[0].values.BeregnDatoKom).getMonth())+1)+"-"+new Date(t.data[0].values.BeregnDatoKom).getFullYear()))]),a._v(" "),e("div",{staticClass:"col-md-12"},[e("table",{staticClass:"table table-striped table-sm table-hover"},[a._m(0,!0),a._v(" "),e("tbody",a._l(t.data,function(t){return e("tr",{staticClass:"row"},[""===t.variable?e("td",{staticClass:"col-md-4"},[a._v("Total")]):e("td",{staticClass:"col-md-4",attrs:{id:"align"}},[a._v(a._s(t.variable))]),a._v(" "),e("td",{staticClass:"col-md-8"},a._l(t.values,function(t,r){return e("div",["AntalNiveau"===r&&""!==t?e("div",[e("div",[a._v("Niveau: "+a._s(t))])]):"AntalKom"===r&&""!==t?e("div",[e("div",[a._v("Kommune: "+a._s(t))])]):"PctNiveau"===r&&""!==t?e("div",{staticClass:"progress"},[e("div",{staticClass:"progress-bar bg-success",style:{width:t+"%"},attrs:{role:"progressbar","aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100"}},[a._v("Niveau: "+a._s(t)+" %")])]):"PctKom"===r&&""!==t?e("div",{staticClass:"progress"},[e("div",{staticClass:"progress-bar bg-warning",style:{width:t+"%"},attrs:{role:"progressbar","aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100"}},[a._v("Kommune: "+a._s(t)+" %")])]):"TotalKom"===r?e("div",[e("div",[a._v("Kommune: "+a._s(t))])]):"TotalNiveau"===r?e("div",[e("div",[a._v("Niveau: "+a._s(t))])]):a._e()])}))])}))])])])}))])],1)},s=[function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("thead",[e("tr",{staticClass:"row"},[e("td",{staticClass:"col-md-4"},[e("strong",[a._v("VARIABEL")])]),a._v(" "),e("td",{staticClass:"col-md-8"},[e("strong",[a._v("VÆRDIER")])])])])}],n={render:r,staticRenderFns:s};t.a=n},lfLh:function(a,t,e){"use strict";function r(a){e("NSCa")}var s=e("Drc2"),n=e("wpnp"),o=e("VU/8"),i=r,l=o(s.a,n.a,!1,i,"data-v-d0930c1e",null);t.a=l.exports},wpnp:function(a,t,e){"use strict";var r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("nav",{staticClass:"navbar fixed-top navbar-toggleable-sm navbar-light bg-faded"},[a._m(0),a._v(" "),e("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[a._v("MIT HOOD")]),a._v(" "),e("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNavDropdown"}},[e("ul",{staticClass:"navbar-nav ml-auto"},[e("li",{directives:[{name:"show",rawName:"v-show",value:a.showToc,expression:"showToc"}],staticClass:"nav-item dropdown"},[e("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a._v("\n          GÅ TIL\n        ")]),a._v(" "),e("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"navbarDropdownMenuLink"}},[e("a",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:"#mapid",expression:"'#mapid'"}],staticClass:"dropdown-item",attrs:{href:"#"}},[e("i",{staticClass:"fa fa-map-marker",attrs:{"aria-hidden":"true"}}),a._v(" Kort")]),a._v(" "),a._l(a.data,function(t){return e("a",{directives:[{name:"show",rawName:"v-show",value:"TotalNiveau"!==t.tablename&&"TotalKom"!==t.tablename,expression:"item.tablename !== 'TotalNiveau' && item.tablename !=='TotalKom'"},{name:"scroll-to",rawName:"v-scroll-to",value:"#"+t.tablename,expression:"'#' + item.tablename"}],staticClass:"dropdown-item",attrs:{href:"#"}},[a._v(a._s(t.title))])})],2)])])])])},s=[function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("button",{staticClass:"navbar-toggler navbar-toggler-right",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}],n={render:r,staticRenderFns:s};t.a=n},xJD8:function(a,t,e){"use strict";var r=e("fZjL"),s=e.n(r),n=e("mtWM"),o=e.n(n),i=e("nrd6"),l=e.n(i),c=e("GMVP"),d=(e.n(c),e("lfLh")),v=e("l9mu"),p=e.n(v);t.a={name:"app",components:{navbar:d.a},data:function(){return{report:{},data:{},geometry:{},map:{},loading:!1,showToc:!1}},methods:{getData:function(a){this.loading=!0;var t=this;o.a.post('http://bal0-lois:8080/api/datapakkeresultat?procedureID=3&geoNavn=&procedureParametre={"UdStraekID":"1","LS2RapportID":"3"}&type=json',a).then(function(a){t.loading=!1,t.showToc=!0,t.report=a.data.Result,t.data=t.beutifyResponse(t.report)}).catch(function(a){t.loading=!1,alert("Kunne ikke få fat i data"),console.info(a)})},beutifyResponse:function(a){var t=[];return a.forEach(function(a){var e=a.Meta.LangtNavn,r=a.Meta.Beskrivelse,s=a.Meta.SheetName,n=a.Table[0],o=[],i=[];for(var l in n)!function(){var a=void 0,t=void 0;"Niveau"==l.split(" ")[l.split(" ").length-1]?(a=l.split(" ").slice(1,l.split(" ").length-1).join(" "),t=l.split(" ")[0]+l.split(" ")[l.split(" ").length-1]):(a=l.split(" ").slice(1,l.split(" ").length).join(" "),t=l.split(" ")[0]+"Kom");var e={variable:"",values:{AntalNiveau:"",AntalKom:"",PctNiveau:"",PctKom:""}};-1===i.indexOf(a)?(i.push(a),e.variable=a,e.values[t]=n[l],o.push(e)):o.forEach(function(e){for(var r in e)if(e[r]==a){e.values[t]=n[l];break}})}();var c={title:e,tablename:s,desciption:r,data:o};t.push(c)}),t},createReport:function(a){0===s()(this.geometry).length&&this.geometry.constructor===Object?alert("Du mangler at tegne et område på kortet"):(this.report={},this.getData(a))},pdf:function(){var a=new p.a,t={"#editor":function(a,t){return!0},".controls":function(a,t){return!0}};a.fromHTML($("#report").get(0),15,15,{width:190,elementHandlers:t}),a.save("lois_raport.pdf")}},mounted:function(){this.$nextTick(function(){var a=l.a.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri"}),t=l.a.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"});this.map=l.a.map("mapid",{center:[55.731267,12.363396],zoom:13,layers:[t]});var e={"Gråskala":t,Luftfoto:a};l.a.control.layers(e).addTo(this.map);var r=new l.a.FeatureGroup;this.map.addLayer(r);var s=new l.a.Control.Draw({draw:{polygon:!0,marker:!1,polyline:!1,rectangle:!1,circle:!1,circlemarker:!1},edit:{featureGroup:r}});this.map.addControl(s);var n=this,o={type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}};this.map.on("draw:created",function(a){var t=a.layer;r.clearLayers(t),n.geometry=t.toGeoJSON(),n.geometry.crs=o,r.addLayer(t)}),this.map.on("draw:edited",function(a){a.layers.eachLayer(function(a){n.geometry=a.toGeoJSON(),n.geometry.crs=o})}),this.map.on("draw:deleted",function(){n.geometry={},n.data={},n.showToc=!1})})}}}},["NHnr"]);
//# sourceMappingURL=app.dc6b4b6011e13e2c75d4.js.map